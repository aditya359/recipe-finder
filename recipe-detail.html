<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recipe Detail-Recipe Finder</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="Styling.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  </head>
  <body class="bg-gray-100">
    <nav class="bg-white shadow">
      <div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">
        <div class="relative flex items-center justify-between h-16">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <a href="index.html">
                <img
                  class="h-16"
                  src="https://play-lh.googleusercontent.com/hFygWSfqgqZEVLVJ8jI_XsWnqRMj2d5bQQUfd8NM9LBxfJ0LPnlu6nYsLn_7mUGaNNk"
                  alt="Logo"
                />
              </a>
            </div>
          </div>
          <div class="hidden sm:block sm:ml-6">
            <div class="flex space-x-4">
              <a
                href="index.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >Home</a
              >
              <a
                href="recipes.html"
                class="text-white bg-green-500 px-3 py-2 rounded-md text-sm font-medium"
                >Recipes</a
              >
              <a
                href="veg.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >Veg</a
              >
              <a
                href="non-veg.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >Non-Veg</a
              >
              <a
                href="cuisine.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >Cuisine</a
              >
              <a
                href="about.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >About Us</a
              >
              <a
                href="contact.html"
                class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium"
                >Contact</a
              >
            </div>
          </div>
          <div class="absolute inset-y-0 right-0 flex items-center sm:hidden">
            <button
              id="mobile-menu-button"
              class="inline-flex items-center justify-center p-2 rounded-md text-green-300 hover:text-yellow-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-gray-500"
              aria-controls="mobile-menu"
              aria-expanded="false"
            >
              <span class="sr-only">Open main menu</span>
              <svg
                class="block h-6 w-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16m-7 6h7"
                />
              </svg>
              <svg
                class="hidden h-6 w-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <div class="sm:hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1">
          <a
            href="index.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >Home</a
          >
          <a
            href="recipes.html"
            class="text-white bg-green-500 block px-3 py-2 rounded-md text-base font-medium"
            >Recipes</a
          >
          <a
            href="veg.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >Veg</a
          >
          <a
            href="non-veg.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >Non-Veg</a
          >
          <a
            href="cuisine.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >Cuisine</a
          >
          <a
            href="about.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >About Us</a
          >
          <a
            href="contact.html"
            class="text-gray-700 hover:bg-gray-100 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium"
            >Contact</a
          >
        </div>
      </div>
    </nav>

    <!-- Recipe Detail Section -->
    <div class="max-w-7xl mx-auto px-4 py-8">
      <div class="bg-white rounded-lg shadow-lg p-6">
        <h1
          class="text-4xl font-bold text-center text-green-600 mb-4"
          id="recipe-title"
        >
          Recipe Title
        </h1>
        <img
          id="recipe-image"
          class="w-full custom-height rounded-lg mb-4"
          src=""
          alt="Recipe Image"
        />

        <h2 class="text-3xl font-semibold text-green-500 mb-2">Ingredients</h2>
        <ul
          id="ingredients-list"
          class="list-disc pl-5 mb-4 text-gray-800"
        ></ul>

        <h2 class="text-3xl font-semibold text-green-500 mb-2">Instructions</h2>
        <p
          id="recipe-instructions"
          class="text-gray-700 leading-relaxed mb-4"
        ></p>

        <div class="flex justify-center">
          <button
            id="save-recipe-btn"
            class="bg-green-500 text-white font-semibold py-2 px-4 rounded hover:bg-green-600 transition duration-200"
          >
            Save Recipe
          </button>
        </div>
      </div>
    </div>

    <!-- Footer Section -->
    <footer
      class="bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white py-10"
    >
      <div class="max-w-7xl mx-auto px-4">
        <div
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-8 text-center md:text-left"
        >
          <!-- Logo Section -->
          <div class="flex flex-col items-center justify-center mb-4">
            <a href="index.html">
              <img
                src="https://play-lh.googleusercontent.com/hFygWSfqgqZEVLVJ8jI_XsWnqRMj2d5bQQUfd8NM9LBxfJ0LPnlu6nYsLn_7mUGaNNk"
                alt="Logo"
                class="h-24 w-24 rounded-full mb-2 object-cover"
              />
            </a>
          </div>
          <!-- Meet the Team Section -->
          <div class="footer-box">
            <h3
              class="text-xl font-semibold mb-4"
              style="text-transform: uppercase"
            >
              Meet the Team
            </h3>
            <ul class="space-y-1">
              <li>Varun Maddi</li>
              <li>Anushka Mahajan</li>
              <li>Rahul Mahto</li>
              <li>Rohit Mandan</li>
              <li>Aman Maurya</li>
            </ul>
          </div>

          <!-- Collaborate with Us Section -->
          <div class="footer-box">
            <h3
              class="text-xl font-semibold mb-4"
              style="text-transform: uppercase"
            >
              Collaborate with Us
            </h3>
            <p>
              If you are interested in collaborating, sharing recipes, or
              contributing, please <br />
              <a
                href="contact.html"
                class="text-green-300 hover:underline hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
                >contact us</a
              >
              .
            </p>
          </div>

          <!-- Contact Us Section -->
          <div class="footer-box">
            <h3
              class="text-xl font-semibold mb-4"
              style="text-transform: uppercase"
            >
              Contact Us
            </h3>
            <p>
              Email:
              <a
                href="mailto:info@recipefinder.com"
                class="text-green-300 hover:underline hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
                >info@recipefinder.com</a
              >
            </p>
            <p>
              Phone:
              <a
                href="tel:+1234567890"
                class="text-green-300 hover:underline hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
                >+123 456 7890</a
              >
            </p>
          </div>

          <!-- Feedback Section -->
          <div class="footer-box">
            <h3
              class="text-xl font-semibold mb-4"
              style="text-transform: uppercase"
            >
              Feedback
            </h3>
            <p>
              We would love to hear your feedback. Please
              <a
                href="feedback.html"
                class="text-green-300 hover:underline hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
                >click here</a
              >
              to share your thoughts.
            </p>
          </div>
        </div>

        <div
          class="mt-8 border-t border-white-700 pt-4 text-center flex justify-between items-center"
        >
          <p>© 2024 Recipe Finder. All rights reserved.</p>
          <div class="flex space-x-4">
            <a
              href="https://www.facebook.com"
              target="_blank"
              aria-label="Facebook"
              class="text-green-300 hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
            >
              <i class="fa fa-facebook"></i>
            </a>
            <a
              href="https://www.twitter.com"
              target="_blank"
              aria-label="Twitter"
              class="text-green-300 hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
            >
              <i class="fa fa-twitter"></i>
            </a>
            <a
              href="https://www.instagram.com"
              target="_blank"
              aria-label="Instagram"
              class="text-green-300 hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
            >
              <i class="fa fa-instagram"></i>
            </a>
            <a
              href="https://www.linkedin.com"
              target="_blank"
              aria-label="LinkedIn"
              class="text-green-300 hover:text-yellow-500 transform hover:scale-125 transition-transform duration-200"
            >
              <i class="fa fa-linkedin"></i>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <!-- JavaScript for fetching recipe details -->
    <script>
      async function fetchRecipeDetails() {
        const urlParams = new URLSearchParams(window.location.search);
        const recipeId = urlParams.get("id");

        try {
          const response = await fetch(
            `https://www.themealdb.com/api/json/v1/1/lookup.php?i=${recipeId}`
          );
          const data = await response.json();
          const recipe = data.meals[0];

          if (!recipe) {
            document.getElementById("recipe-title").textContent =
              "Recipe not found.";
            return;
          }

          document.getElementById("recipe-title").textContent = recipe.strMeal;
          document.getElementById("recipe-image").src = recipe.strMealThumb;

          const ingredientsList = document.getElementById("ingredients-list");
          ingredientsList.innerHTML = "";
          for (let i = 1; i <= 20; i++) {
            const ingredient = recipe[`strIngredient${i}`];
            const measure = recipe[`strMeasure${i}`];
            if (ingredient) {
              const li = document.createElement("li");
              li.textContent = `${measure} ${ingredient}`;
              ingredientsList.appendChild(li);
            }
          }

          document.getElementById("recipe-instructions").textContent =
            recipe.strInstructions;
        } catch (error) {
          console.error("Error fetching recipe details:", error);
        }
      }

      document.addEventListener("DOMContentLoaded", fetchRecipeDetails);

      // Save Recipe button functionality
      document
        .getElementById("save-recipe-btn")
        .addEventListener("click", async () => {
          const title = document.getElementById("recipe-title").textContent;
          const ingredients = Array.from(
            document.querySelectorAll("#ingredients-list li")
          )
            .map((li) => li.textContent)
            .join("\n");
          const instructions = document.getElementById(
            "recipe-instructions"
          ).textContent;
          const imageUrl = document.getElementById("recipe-image").src;

          // Create a PDF
          const { jsPDF } = window.jspdf; // Access jsPDF from the global scope
          const doc = new jsPDF();

          // Load and add the image
          const imgData = await loadImage(imageUrl);
          doc.addImage(imgData, "JPEG", 10, 10, 180, 120); // Adjust width and height as necessary

          // Title
          doc.setFontSize(16);
          doc.setFont(undefined, "bold"); // Set font to bold for the title
          doc.text(title, 10, 140); // Adjust Y position based on image height

          // Ingredients
          doc.setFontSize(14);
          doc.text("Ingredients:", 10, 150);
          doc.setFont(undefined, "bold"); // Set font to bold for the ingredients header
          const ingredientLines = doc.splitTextToSize(ingredients, 180); // Split long text into lines
          let currentY = 160; // Starting Y position for ingredients
          doc.setFont(undefined, "normal"); // Reset to normal font for ingredient items
          ingredientLines.forEach((line) => {
            doc.text(line, 10, currentY);
            currentY += 7; // Reduced space for the next line
          });

          // Instructions
          doc.setFontSize(14);
          currentY += 5; // Reduce space before instructions header
          doc.setFont(undefined, "bold"); // Set font to bold for the instructions header
          doc.text("Instructions:", 10, currentY);
          doc.setFont(undefined, "normal"); // Reset to normal font for instructions content
          const instructionLines = doc.splitTextToSize(instructions, 180); // Split long text into lines
          currentY += 10; // Move down for instructions header
          instructionLines.forEach((line) => {
            doc.text(line, 10, currentY);
            currentY += 7; // Reduced space for the next line
          });

          // Save the PDF
          doc.save(`${title}.pdf`);
        });

      const loadImage = (url) => {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.crossOrigin = "Anonymous"; // This is necessary to avoid CORS issues
          img.onload = () => {
            const canvas = document.createElement("canvas");
            canvas.width = img.width;
            canvas.height = img.height;
            const ctx = canvas.getContext("2d");
            ctx.drawImage(img, 0, 0);
            const imgData = canvas.toDataURL("image/jpeg");
            resolve(imgData);
          };
          img.onerror = (error) => {
            reject(error);
          };
          img.src = url;
        });
      };

      const mobileMenuButton = document.getElementById("mobile-menu-button");
      const mobileMenu = document.getElementById("mobile-menu");

      mobileMenuButton.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    </script>
  </body>
</html>
